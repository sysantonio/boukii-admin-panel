// ==================== VARIABLES ====================
$primary-color: #3A57A7;
$secondary-color: #FCB859;
$success-color: #4CAF50;
$warning-color: #FF9800;
$danger-color: #F44336;
$info-color: #2196F3;

$background-primary: #fafafa;
$background-secondary: #ffffff;
$text-primary: #212121;
$text-secondary: #757575;
$text-muted: #9E9E9E;

$border-radius: 8px;
$border-radius-large: 12px;
$box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
$box-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.15);
$transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);

// ==================== FILTERS SECTION ====================
.filters-section {
  margin-bottom: 24px;

  .filters-card {
    border-radius: $border-radius-large;
    box-shadow: $box-shadow;
    transition: $transition;

    &:hover {
      box-shadow: $box-shadow-hover;
    }

    .mat-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px 16px 24px;
      border-bottom: 1px solid #f0f0f0;

      .mat-card-title {
        font-size: 18px;
        font-weight: 600;
        color: $text-primary;
        margin: 0;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    }

    .mat-card-content {
      padding: 20px 24px;
    }
  }

  .filters-form {
    .filters-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
      align-items: end;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        gap: 12px;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }

    .filter-field {
      width: 100%;

      .mat-form-field-wrapper {
        padding-bottom: 0;
      }

      .mat-form-field-infix {
        border-top: none;
      }

      .mat-form-field-outline-thick {
        color: $primary-color;
      }

      &.mat-focused {
        .mat-form-field-ripple {
          background-color: $primary-color;
        }
      }
    }

    .advanced-filters {
      border-top: 1px solid #f0f0f0;
      padding-top: 20px;
      margin-top: 20px;

      .filters-row {
        &:first-child {
          margin-top: 0;
        }
      }
    }

    button[mat-raised-button] {
      height: 40px;
      min-width: 140px;
      border-radius: $border-radius;
      font-weight: 500;
      text-transform: none;
      box-shadow: $box-shadow;
      transition: $transition;

      &:hover {
        box-shadow: $box-shadow-hover;
        transform: translateY(-1px);
      }

      &:disabled {
        opacity: 0.6;
        transform: none !important;
        box-shadow: $box-shadow !important;
      }
    }

    mat-checkbox {
      margin-right: 20px;

      @media (max-width: 768px) {
        margin-right: 0;
        margin-bottom: 12px;
      }

      .mat-checkbox-checkmark-path {
        stroke: $primary-color !important;
      }

      .mat-checkbox-checked.mat-accent .mat-checkbox-background {
        background-color: $primary-color;
        border-color: $primary-color;
      }
    }
  }
}

// ==================== LOADING STATE ====================
.loading-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 400px;
  padding: 40px;

  .loading-card {
    max-width: 400px;
    text-align: center;
    border-radius: $border-radius-large;
    box-shadow: $box-shadow;

    .loading-content {
      padding: 40px;

      mat-spinner {
        margin: 0 auto 24px auto;

        ::ng-deep circle {
          stroke: $primary-color;
        }
      }

      h2 {
        margin: 0 0 12px 0;
        color: $text-primary;
        font-size: 20px;
        font-weight: 600;
      }

      p {
        margin: 0;
        color: $text-secondary;
        font-size: 14px;
      }
    }
  }
}

// ==================== ANALYTICS CONTENT ====================
.analytics-content {
  .section-title {
    font-size: 24px;
    font-weight: 600;
    color: $text-primary;
    margin: 0 0 20px 0;
    display: flex;
    align-items: center;
    gap: 12px;

    mat-icon {
      color: $primary-color;
    }
  }

  // KPIs Section
  .kpis-section {
    margin-bottom: 32px;

    .kpis-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
  }

  // Classification Section
  .classification-section {
    margin-bottom: 32px;

    .classification-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
        gap: 16px;
      }
    }
  }

  // Analytics Tabs
  .analytics-tabs {
    border-radius: $border-radius-large;
    box-shadow: $box-shadow;
    background: $background-secondary;
    overflow: hidden;

    ::ng-deep {
      .mat-tab-header {
        background: $background-secondary;
        border-bottom: 1px solid #f0f0f0;

        .mat-tab-list {
          .mat-tab-labels {
            justify-content: space-around;

            @media (max-width: 768px) {
              justify-content: flex-start;
              overflow-x: auto;
            }
          }

          .mat-tab-label {
            min-width: 120px;
            padding: 12px 16px;
            font-weight: 500;
            text-transform: none;
            color: $text-secondary;
            transition: $transition;

            @media (max-width: 768px) {
              min-width: 100px;
              font-size: 13px;
            }

            &.mat-tab-label-active {
              color: $primary-color;
              font-weight: 600;
            }

            &:hover {
              background-color: rgba($primary-color, 0.05);
            }
          }

          .mat-ink-bar {
            background-color: $primary-color;
            height: 3px;
          }
        }
      }

      .mat-tab-body-wrapper {
        .mat-tab-body {
          .mat-tab-body-content {
            padding: 0;
            overflow: visible;
          }
        }
      }
    }

    .tab-content {
      padding: 24px;

      @media (max-width: 768px) {
        padding: 16px;
      }
    }
  }
}

// ==================== CHARTS ====================
.charts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 24px;
  margin-bottom: 32px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 16px;
    margin-bottom: 24px;
  }

  .full-width {
    grid-column: 1 / -1;
  }
}

.chart-card {
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  transition: $transition;
  background: $background-secondary;
  overflow: hidden;

  &:hover {
    box-shadow: $box-shadow-hover;
    transform: translateY(-2px);
  }

  .mat-card-header {
    padding: 20px 24px 16px 24px;
    border-bottom: 1px solid #f0f0f0;
    background: linear-gradient(135deg, rgba($primary-color, 0.02) 0%, rgba($secondary-color, 0.02) 100%);

    .mat-card-title {
      font-size: 18px;
      font-weight: 600;
      color: $text-primary;
      margin: 0;
    }

    .mat-card-subtitle {
      font-size: 14px;
      color: $text-secondary;
      margin: 4px 0 0 0;
    }
  }

  .mat-card-content {
    padding: 20px 24px;

    .chart-container {
      min-height: 350px;
      width: 100%;
      position: relative;

      @media (max-width: 768px) {
        min-height: 280px;
      }
    }
  }
}

// ==================== TABLES ====================
.table-card {
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  background: $background-secondary;
  overflow: hidden;
  margin-bottom: 24px;

  .mat-card-header {
    padding: 20px 24px 16px 24px;
    border-bottom: 1px solid #f0f0f0;
    background: linear-gradient(135deg, rgba($primary-color, 0.02) 0%, rgba($secondary-color, 0.02) 100%);
    display: flex;
    justify-content: space-between;
    align-items: center;

    .mat-card-title {
      font-size: 18px;
      font-weight: 600;
      color: $text-primary;
      margin: 0;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 12px;

      .search-field {
        width: 250px;

        @media (max-width: 768px) {
          width: 200px;
        }

        .mat-form-field-wrapper {
          padding-bottom: 0;
        }
      }
    }
  }

  .mat-card-content {
    padding: 0;
  }

  .table-container {
    overflow-x: auto;
    max-height: 500px;

    table {
      width: 100%;
      border-collapse: collapse;

      th {
        background: #f8f9fa;
        color: $text-primary;
        font-weight: 600;
        font-size: 14px;
        padding: 16px 12px;
        text-align: left;
        border-bottom: 2px solid #e9ecef;
        position: sticky;
        top: 0;
        z-index: 1;
      }

      td {
        padding: 12px;
        font-size: 14px;
        color: $text-primary;
        border-bottom: 1px solid #f0f0f0;
        vertical-align: middle;

        &:first-child {
          padding-left: 24px;
        }

        &:last-child {
          padding-right: 24px;
        }
      }

      tr {
        transition: $transition;

        &:hover {
          background-color: rgba($primary-color, 0.02);
        }
      }

      .course-type-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 500;
        text-transform: uppercase;

        &.type-1 {
          background-color: rgba($success-color, 0.1);
          color: $success-color;
        }

        &.type-2 {
          background-color: rgba($info-color, 0.1);
          color: $info-color;
        }

        &.type-3 {
          background-color: rgba($warning-color, 0.1);
          color: $warning-color;
        }
      }

      .completion-rate {
        display: flex;
        align-items: center;
        gap: 8px;

        mat-progress-bar {
          flex: 1;
          height: 6px;
          border-radius: 3px;

          ::ng-deep {
            .mat-progress-bar-background {
              background-color: #e0e0e0;
            }

            .mat-progress-bar-buffer {
              background-color: $success-color;
            }

            .mat-progress-bar-fill::after {
              background-color: $success-color;
            }
          }
        }

        span {
          font-size: 12px;
          font-weight: 500;
          color: $text-secondary;
          min-width: 35px;
        }
      }
    }
  }
}

// ==================== PAYMENT METHODS SUMMARY ====================
.payment-methods-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 32px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 16px;
  }
}

.payment-method-card {
  background: $background-secondary;
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  padding: 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  transition: $transition;

  &:hover {
    box-shadow: $box-shadow-hover;
    transform: translateY(-2px);
  }

  .payment-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba($primary-color, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;

    mat-icon {
      font-size: 24px;
      width: 24px;
      height: 24px;
    }
  }

  .payment-details {
    flex: 1;

    h3 {
      font-size: 16px;
      font-weight: 600;
      color: $text-primary;
      margin: 0 0 8px 0;
    }

    .payment-amount {
      font-size: 20px;
      font-weight: 700;
      color: $primary-color;
      margin-bottom: 4px;
    }

    .payment-count {
      font-size: 14px;
      color: $text-secondary;
      margin-bottom: 4px;
    }

    .payment-percentage {
      font-size: 12px;
      font-weight: 500;
      color: $success-color;
    }
  }
}

// ==================== SOURCES SUMMARY ====================
.sources-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 32px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
    gap: 16px;
  }
}

.source-card {
  background: $background-secondary;
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  padding: 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  transition: $transition;

  &:hover {
    box-shadow: $box-shadow-hover;
    transform: translateY(-2px);
  }

  .source-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: rgba($secondary-color, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;

    mat-icon {
      font-size: 24px;
      width: 24px;
      height: 24px;
    }
  }

  .source-details {
    flex: 1;

    h3 {
      font-size: 16px;
      font-weight: 600;
      color: $text-primary;
      margin: 0 0 8px 0;
    }

    .source-revenue {
      font-size: 18px;
      font-weight: 700;
      color: $primary-color;
      margin-bottom: 4px;
    }

    .source-bookings,
    .source-average {
      font-size: 14px;
      color: $text-secondary;
      margin-bottom: 2px;
    }

    .source-percentage {
      font-size: 12px;
      font-weight: 500;
      color: $info-color;
    }
  }
}

// ==================== COMPARISON SECTION ====================
.comparison-summary {
  .comparison-section {
    margin-bottom: 32px;

    h3 {
      font-size: 20px;
      font-weight: 600;
      color: $text-primary;
      margin: 0 0 16px 0;
    }

    .comparison-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
      }
    }
  }
}

.comparison-card {
  background: $background-secondary;
  border-radius: $border-radius;
  box-shadow: $box-shadow;
  padding: 20px;
  text-align: center;
  transition: $transition;

  &:hover {
    box-shadow: $box-shadow-hover;
  }

  .comparison-label {
    font-size: 14px;
    color: $text-secondary;
    margin-bottom: 8px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .comparison-value {
    font-size: 24px;
    font-weight: 700;
    color: $text-primary;
    margin-bottom: 8px;

    &.current {
      color: $primary-color;
    }

    &.previous {
      color: $text-secondary;
    }

    &.neutral {
      color: $warning-color;
    }

    &.positive {
      color: $success-color;
    }

    &.negative {
      color: $danger-color;
    }
  }

  .comparison-revenue {
    font-size: 14px;
    color: $text-secondary;
    font-weight: 500;
  }
}

// ==================== ALERTS SECTION ====================
.alerts-section {
  margin-bottom: 32px;

  h3 {
    font-size: 20px;
    font-weight: 600;
    color: $text-primary;
    margin: 0 0 16px 0;
  }

  .alerts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }
}

.alert-card {
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  transition: $transition;
  border-left: 4px solid;

  &:hover {
    box-shadow: $box-shadow-hover;
    transform: translateY(-2px);
  }

  &.alert-critical {
    border-left-color: $danger-color;
    background: linear-gradient(135deg, rgba($danger-color, 0.02) 0%, rgba($danger-color, 0.05) 100%);
  }

  &.alert-warning {
    border-left-color: $warning-color;
    background: linear-gradient(135deg, rgba($warning-color, 0.02) 0%, rgba($warning-color, 0.05) 100%);
  }

  &.alert-info {
    border-left-color: $info-color;
    background: linear-gradient(135deg, rgba($info-color, 0.02) 0%, rgba($info-color, 0.05) 100%);
  }

  .mat-card-header {
    padding: 16px 20px 8px 20px;

    .mat-card-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 16px;
      font-weight: 600;
      margin: 0;

      mat-icon {
        font-size: 20px;
        width: 20px;
        height: 20px;
      }
    }

    .mat-card-subtitle {
      font-size: 12px;
      text-transform: uppercase;
      font-weight: 500;
      margin: 4px 0 0 28px;
      opacity: 0.7;
    }
  }

  .mat-card-content {
    padding: 8px 20px 16px 20px;

    p {
      margin: 0 0 12px 0;
      line-height: 1.5;
    }

    .alert-meta {
      display: flex;
      gap: 16px;
      font-size: 12px;

      .impact {
        color: $text-secondary;
      }

      .action-required {
        color: $danger-color;
        font-weight: 600;
      }
    }
  }
}

// ==================== RECOMMENDATIONS SECTION ====================
.recommendations-section {
  margin-bottom: 32px;

  h3 {
    font-size: 20px;
    font-weight: 600;
    color: $text-primary;
    margin: 0 0 16px 0;
  }

  .recommendations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 24px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }
}

.recommendation-card {
  border-radius: $border-radius-large;
  box-shadow: $box-shadow;
  transition: $transition;
  border-left: 4px solid;

  &:hover {
    box-shadow: $box-shadow-hover;
    transform: translateY(-2px);
  }

  &.priority-critical {
    border-left-color: $danger-color;
    background: linear-gradient(135deg, rgba($danger-color, 0.02) 0%, rgba($danger-color, 0.05) 100%);
  }

  &.priority-high {
    border-left-color: $warning-color;
    background: linear-gradient(135deg, rgba($warning-color, 0.02) 0%, rgba($warning-color, 0.05) 100%);
  }

  &.priority-medium {
    border-left-color: $info-color;
    background: linear-gradient(135deg, rgba($info-color, 0.02) 0%, rgba($info-color, 0.05) 100%);
  }

  &.priority-low {
    border-left-color: $success-color;
    background: linear-gradient(135deg, rgba($success-color, 0.02) 0%, rgba($success-color, 0.05) 100%);
  }

  .mat-card-header {
    padding: 16px 20px 8px 20px;

    .mat-card-title {
      font-size: 18px;
      font-weight: 600;
      margin: 0;
      color: $text-primary;
    }

    .mat-card-subtitle {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 8px 0 0 0;

      .priority-badge {
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 10px;
        font-weight: 600;
        color: white;

        .priority-critical & {
          background-color: $danger-color;
        }

        .priority-high & {
          background-color: $warning-color;
        }

        .priority-medium & {
          background-color: $info-color;
        }

        .priority-low & {
          background-color: $success-color;
        }
      }

      .category {
        font-size: 12px;
        color: $text-secondary;
        text-transform: capitalize;
      }
    }
  }

  .mat-card-content {
    padding: 8px 20px 20px 20px;

    p {
      margin: 0 0 16px 0;
      line-height: 1.5;
      color: $text-primary;
    }

    .recommendation-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-bottom: 16px;
      padding: 12px;
      background: rgba(0, 0, 0, 0.02);
      border-radius: $border-radius;

      .meta-item {
        font-size: 12px;

        strong {
          color: $text-primary;
        }
      }
    }

    .actions-list {
      margin-bottom: 16px;

      strong {
        color: $text-primary;
        font-size: 14px;
      }

      ul {
        margin: 8px 0 0 0;
        padding-left: 20px;

        li {
          font-size: 13px;
          line-height: 1.4;
          margin-bottom: 4px;
          color: $text-primary;
        }
      }
    }

    .expected-benefit {
      padding: 12px;
      background: rgba($success-color, 0.1);
      border-radius: $border-radius;
      border-left: 3px solid $success-color;

      strong {
        color: $success-color;
        font-size: 14px;
      }
    }
  }
}

// ==================== EMPTY STATE ====================
.empty-state {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 400px;
  padding: 40px;

  .empty-card {
    max-width: 500px;
    text-align: center;
    border-radius: $border-radius-large;
    box-shadow: $box-shadow;

    .empty-content {
      padding: 60px 40px;

      .empty-icon {
        font-size: 64px;
        width: 64px;
        height: 64px;
        color: $text-muted;
        margin: 0 auto 24px auto;
        display: block;
      }

      h2 {
        margin: 0 0 16px 0;
        color: $text-primary;
        font-size: 24px;
        font-weight: 600;
      }

      p {
        margin: 0 0 32px 0;
        color: $text-secondary;
        font-size: 16px;
        line-height: 1.5;
      }

      button {
        border-radius: $border-radius;
        font-weight: 500;
        text-transform: none;
        padding: 12px 24px;
      }
    }
  }
}

// ==================== RESPONSIVE UTILITIES ====================
@media (max-width: 1200px) {
  .analytics-content {
    .charts-grid {
      grid-template-columns: 1fr !important;
    }

    .recommendations-grid {
      grid-template-columns: 1fr !important;
    }
  }
}

@media (max-width: 768px) {
  .analytics-content {
    .section-title {
      font-size: 20px;
    }

    .kpis-section .kpis-grid {
      grid-template-columns: 1fr !important;
    }

    .classification-section .classification-grid {
      grid-template-columns: 1fr !important;
    }

    .analytics-tabs .tab-content {
      padding: 16px !important;
    }

    .alerts-grid {
      grid-template-columns: 1fr !important;
    }
  }

  .chart-card .chart-container {
    min-height: 250px !important;
  }

  .table-card {
    .mat-card-header {
      flex-direction: column;
      align-items: stretch;
      gap: 16px;

      .header-actions .search-field {
        width: 100%;
      }
    }
  }

  .recommendation-card .recommendation-meta {
    grid-template-columns: 1fr !important;
  }
}

// ==================== ANIMATIONS ====================
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.analytics-content > * {
  animation: fadeInUp 0.6s ease-out;
}

.kpis-grid > * {
  animation: fadeInUp 0.6s ease-out;
}

.charts-grid > * {
  animation: fadeInUp 0.6s ease-out;
}

.alerts-grid > * {
  animation: fadeInUp 0.6s ease-out;
}

.recommendations-grid > * {
  animation: fadeInUp 0.6s ease-out;
}

// ==================== ACCESSIBILITY ====================
.chart-card:focus,
.table-card:focus,
.payment-method-card:focus,
.source-card:focus,
.alert-card:focus,
.recommendation-card:focus {
  outline: 2px solid $primary-color;
  outline-offset: 2px;
}

// ==================== PRINT STYLES ====================
@media print {
  .analytics-content {
    background: white !important;

    .filters-section,
    .analytics-tabs ::ng-deep .mat-tab-header {
      display: none !important;
    }

    .chart-card,
    .table-card,
    .payment-method-card,
    .source-card,
    .alert-card,
    .recommendation-card {
      box-shadow: none !important;
      border: 1px solid #ccc !important;
      page-break-inside: avoid;
    }

    .charts-grid {
      grid-template-columns: 1fr !important;
    }

    .alerts-grid,
    .recommendations-grid {
      grid-template-columns: 1fr !important;
    }
  }
}

// Estilos adicionales para analytics.component.scss

// ==================== ESTILOS ADICIONALES PARA MODAL EN analytics.component.scss ====================

// Cards clickeables mejoradas
.kpi-card.clickeable {
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: visible;
  border: 2px solid transparent;

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;

    &::before {
      opacity: 1;
    }
  }

  &:active {
    transform: translateY(-2px);
    transition-duration: 0.1s;
  }

  // Efecto de fondo sutil
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  // Indicador visual sutil
  &::after {
    content: 'üëÜ';
    position: absolute;
    top: 12px;
    right: 12px;
    font-size: 14px;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
    z-index: 2;
  }

  &:hover::after {
    opacity: 0.8;
    transform: scale(1.1);
  }

  // Ocultar en m√≥vil
  @media (max-width: 768px) {
    &::after {
      display: none;
    }

    &:hover {
      transform: none;
    }
  }
}

// Estilos espec√≠ficos para classification cards clickeables
.classification-grid .kpi-card.clickeable {
  &:hover {
    &.success {
      box-shadow: 0 8px 24px rgba(76, 175, 80, 0.2) !important;
    }

    &.danger {
      box-shadow: 0 8px 24px rgba(244, 67, 54, 0.2) !important;
    }

    &.warning {
      box-shadow: 0 8px 24px rgba(255, 152, 0, 0.2) !important;
    }
  }
}

// Snackbar custom styles
::ng-deep {
  .snackbar-success {
    background-color: #4caf50 !important;
    color: white !important;
  }

  .snackbar-error {
    background-color: #f44336 !important;
    color: white !important;
  }

  .snackbar-warning {
    background-color: #ff9800 !important;
    color: white !important;
  }

  .snackbar-info {
    background-color: #2196f3 !important;
    color: white !important;
  }

  // Modal personalizado
  .booking-list-modal {
    .mat-dialog-container {
      padding: 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 24px 38px 3px rgba(0,0,0,0.14),
      0 9px 46px 8px rgba(0,0,0,0.12),
      0 11px 15px -7px rgba(0,0,0,0.20);
    }

    .mat-dialog-content {
      margin: 0;
      padding: 0;
      max-height: none;
    }

    .mat-dialog-actions {
      margin: 0;
      padding: 0;
    }
  }
}

// Loading states para cards
.kpi-card {
  &.loading {
    opacity: 0.7;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg,
        transparent 0%,
        rgba(255,255,255,0.4) 50%,
        transparent 100%);
      animation: shimmer 2s infinite;
      z-index: 1;
    }
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

// Mejoras de accesibilidad
.clickeable {
  &:focus {
    outline: 2px solid #2196f3;
    outline-offset: 2px;
  }

  &[aria-pressed="true"] {
    background-color: rgba(33, 150, 243, 0.1);
  }
}

// Estados de hover para diferentes tipos de datos
.kpi-card {
  &[data-type="revenue"]:hover {
    border-left-color: #4caf50;
  }

  &[data-type="bookings"]:hover {
    border-left-color: #2196f3;
  }

  &[data-type="pending"]:hover {
    border-left-color: #ff9800;
  }

  &[data-type="clients"]:hover {
    border-left-color: #9c27b0;
  }
}

// Responsive improvements
@media (max-width: 1200px) {
  .kpi-card.clickeable {
    &::after {
      font-size: 12px;
    }
  }
}

@media (max-width: 768px) {
  .kpi-card.clickeable {
    &:hover {
      transform: none;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15) !important;
    }
  }
}

// Dark mode support (if needed)
@media (prefers-color-scheme: dark) {
  .kpi-card.clickeable {
    &::before {
      background: linear-gradient(45deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%);
    }

    &:hover {
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
    }
  }
}

// Print styles (hide interactive elements)
@media print {
  .clickeable {
    cursor: default !important;

    &::after {
      display: none !important;
    }

    &:hover {
      transform: none !important;
      box-shadow: none !important;
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .kpi-card.clickeable {
    border: 2px solid;

    &:hover {
      border-width: 3px;
    }

    &::after {
      font-size: 16px;
      font-weight: bold;
    }
  }
}


.course-type-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: white;

  // Colores de respaldo por si falla el style binding
  &.type-1 {
    background-color: #FAC710; // Colectivo
  }

  &.type-2 {
    background-color: #8FD14F; // Privado
  }

  &.type-3 {
    background-color: #00beff; // Actividad
  }
}

::ng-deep .modal-backdrop {
  background-color: rgba(0, 0, 0, 0.6) !important;
}

::ng-deep .course-statistics-modal-overlay {
  .mat-dialog-container {
    padding: 0 !important;
    border-radius: 12px !important;
    overflow: hidden !important;

    @media (max-width: 768px) {
      width: 95vw !important;
      height: 90vh !important;
      max-width: none !important;
      max-height: none !important;
      margin: 2.5vw !important;
    }
  }
}

/* Mejorar el bot√≥n de detalles en la tabla */
.course-details-button {
  background: linear-gradient(135deg, #3A57A7 0%, #2c4490 100%);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;

  &:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(58, 87, 167, 0.3);
  }

  &:active {
    transform: translateY(0);
  }
}

/* Estilos para la tabla de cursos */
.courses-table-container {
  .course-type-badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    color: white;

    &.type-1 {
      background-color: #FAC710;
    }

    &.type-2 {
      background-color: #8FD14F;
    }

    &.type-3 {
      background-color: #00beff;
    }
  }
}

.actions-cell {
  display: flex;
  align-items: center;
  gap: 8px;

  .course-details-button {
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 100px;
    height: 36px;
    font-size: 0.875rem;

    mat-icon {
      font-size: 1.125rem;
      width: 1.125rem;
      height: 1.125rem;
    }
  }

  .course-menu-button {
    width: 36px;
    height: 36px;
    color: #666666;

    &:hover {
      color: #3A57A7;
      background-color: rgba(58, 87, 167, 0.08);
    }
  }
}

// Mejorar el badge de tipo de curso
.course-type-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 12px;
  border-radius: 16px;
  font-size: 0.75rem;
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.5px;

  &.type-1 {
    background: linear-gradient(135deg, #FAC710 0%, #f0b90b 100%);
  }

  &.type-2 {
    background: linear-gradient(135deg, #8FD14F 0%, #7cb342 100%);
  }

  &.type-3 {
    background: linear-gradient(135deg, #00beff 0%, #0099cc 100%);
  }
}

// Mejorar la tabla general
.table-container {
  .mat-table {
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

    .mat-header-row {
      background-color: #f8f9fa;

      .mat-header-cell {
        font-weight: 600;
        color: #374151;
        border-bottom: 2px solid #e5e7eb;
      }
    }

    .mat-row {
      transition: background-color 0.2s ease;

      &:hover {
        background-color: #f8f9fa;
      }
    }
  }
}

/* Payment Methods Tab Styles */
.payments-tab {
  padding: 20px;
}

/* Payment KPIs Section */
.payment-kpis-grid {
  margin-bottom: 30px;
}

.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.revenue-total-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.distribution-card {
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  color: white;
}

/* Payment Charts Section */
.payment-charts-section {
  margin-bottom: 30px;
}

.section-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 20px;
  border-bottom: 2px solid #e5e7eb;
  padding-bottom: 8px;
}

/* Payment Methods Grid */
.payment-methods-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 20px;
}

.payment-method-card {
  border-radius: 12px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  border-left: 4px solid #e5e7eb;
}

.payment-method-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 15px -3px rgba(0, 0, 0, 0.1);
}

/* Payment Method Header */
.payment-method-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.method-name {
  font-weight: 600;
  font-size: 1.1rem;
  color: #374151;
  text-transform: capitalize;
}

/* Payment Stats */
.payment-stats {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 16px;
}

.stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
}

.stat.primary {
  border-bottom: 1px solid #e5e7eb;
  font-weight: 600;
}

.stat-label {
  font-size: 0.875rem;
  color: #6b7280;
  font-weight: 500;
}

.stat-value {
  font-weight: 600;
  color: #111827;
}

.stat.primary .stat-value {
  color: #059669;
  font-size: 1.125rem;
}

.stat.percentage .stat-value {
  color: #7c3aed;
  font-weight: 700;
}

/* Revenue Bar Visualization */
.revenue-bar-container {
  width: 100%;
  height: 6px;
  background-color: #f3f4f6;
  border-radius: 3px;
  overflow: hidden;
  margin-top: 8px;
}

.revenue-bar {
  height: 100%;
  border-radius: 3px;
  transition: width 0.8s ease;
}

/* Payment Method Specific Styles */
.payment-method-card[data-method="cash"] {
  border-left-color: #059669;
}

.payment-method-card[data-method="card"] {
  border-left-color: #3b82f6;
}

.payment-method-card[data-method="online"] {
  border-left-color: #f59e0b;
}

.payment-method-card[data-method="vouchers"] {
  border-left-color: #8b5cf6;
}

.payment-method-card[data-method="pending"] {
  border-left-color: #ef4444;
}

/* Revenue Bar Colors */
.revenue-bar.cash-bar {
  background: linear-gradient(90deg, #059669, #10b981);
}

.revenue-bar.card-bar {
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
}

.revenue-bar.online-bar {
  background: linear-gradient(90deg, #f59e0b, #fbbf24);
}

.revenue-bar.vouchers-bar {
  background: linear-gradient(90deg, #8b5cf6, #a78bfa);
}

.revenue-bar.pending-bar {
  background: linear-gradient(90deg, #ef4444, #f87171);
}

/* Icon Colors */
.mat-icon.cash-icon {
  color: #059669;
}

.mat-icon.card-icon {
  color: #3b82f6;
}

.mat-icon.online-icon {
  color: #f59e0b;
}

.mat-icon.vouchers-icon {
  color: #8b5cf6;
}

.mat-icon.pending-icon {
  color: #ef4444;
}

/* Responsive Design */
@media (max-width: 768px) {
  .kpi-grid {
    grid-template-columns: 1fr;
  }

  .payment-methods-grid {
    grid-template-columns: 1fr;
  }

  .payments-tab {
    padding: 15px;
  }
}

/* Chart Container */
.chart-container {
  height: 300px;
  width: 100%;
}

/* Estilos globales para todas las cards clickeables del dashboard */

/* Para las KPI cards clickeables (pending revenue, cancelled bookings, etc.) */
.kpi-card.clickeable {
  cursor: pointer !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: visible;
  border: 2px solid transparent;
}

.kpi-card.clickeable:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
  border-color: rgba(58, 87, 167, 0.3);
}

/* Icono de ojo permanente para KPI cards */
.kpi-card.clickeable::before {
  content: '';
  position: absolute;
  top: 16px;
  right: 16px;
  width: 28px;
  height: 28px;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/%3e%3c/svg%3e");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.7;
  transition: all 0.3s ease;
  z-index: 2;
}

.kpi-card.clickeable:hover::before {
  opacity: 1;
  transform: scale(1.1);
}

/* Badge de acci√≥n para KPI cards */
.kpi-card.clickeable::after {
  content: 'Ver detalles';
  position: absolute;
  bottom: 12px;
  right: 12px;
  background: rgba(255, 255, 255, 0.2);
  color: white;
  font-size: 9px;
  font-weight: 600;
  padding: 3px 6px;
  border-radius: 8px;
  opacity: 0;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  backdrop-filter: blur(4px);
  z-index: 2;
}

.kpi-card.clickeable:hover::after {
  opacity: 1;
}

/* Para cards de clasificaci√≥n (cancelled bookings, etc.) */
.classification-grid .kpi-card.clickeable::before {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23374151'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/%3e%3c/svg%3e");
}

.classification-grid .kpi-card.clickeable::after {
  background: rgba(58, 87, 167, 0.1);
  color: #3A57A7;
}

.classification-grid .kpi-card.clickeable:hover::after {
  background: rgba(58, 87, 167, 0.2);
}

/* Indicador adicional para accesibilidad */
.clickeable-card:focus,
.kpi-card.clickeable:focus {
  outline: 2px solid #3A57A7;
  outline-offset: 2px;
}

/* Estados de hover espec√≠ficos por tipo */
.kpi-card.clickeable[data-type="warning"]:hover {
  border-color: rgba(255, 152, 0, 0.4);
}

.kpi-card.clickeable[data-type="danger"]:hover {
  border-color: rgba(244, 67, 54, 0.4);
}

.kpi-card.clickeable[data-type="success"]:hover {
  border-color: rgba(76, 175, 80, 0.4);
}

/* Responsive: ocultar indicadores en m√≥vil */
@media (max-width: 768px) {
  .kpi-card.clickeable::before,
  .clickeable-card::before {
    display: none;
  }

  .kpi-card.clickeable::after,
  .clickeable-card::after {
    font-size: 8px;
    padding: 2px 4px;
  }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
  .kpi-card.clickeable::before {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23e5e7eb'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 016 0z'/%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/%3e%3c/svg%3e");
  }
}

/* Print: ocultar indicadores de interactividad */
@media print {
  .kpi-card.clickeable::before,
  .kpi-card.clickeable::after,
  .clickeable-card::before,
  .clickeable-card::after {
    display: none !important;
  }

  .kpi-card.clickeable,
  .clickeable-card {
    cursor: default !important;
    transform: none !important;
    border: 1px solid #ccc !important;
  }
}

/* ===== CARDS CLICKEABLES - ESTILOS GLOBALES ===== *
/* Para cards de clasificaci√≥n (cancelled bookings, etc.) */
.classification-grid app-kpis-card.clickeable::before {
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23374151'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 616 0z'/%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/%3e%3c/svg%3e");
}

.classification-grid app-kpis-card.clickeable::after {
  background: rgba(58, 87, 167, 0.1);
  color: #3A57A7;
}

/* Para payment method cards (.payment-method-card.clickeable-card) */
.payment-method-card.clickeable-card {
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  border: 2px solid transparent;
}

.payment-method-card.clickeable-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
  border-color: rgba(58, 87, 167, 0.3);
}

/* Icono de ojo para payment cards */
.payment-method-card.clickeable-card::before {
  content: '';
  position: absolute;
  top: 12px;
  right: 12px;
  width: 20px;
  height: 20px;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 12a3 3 0 11-6 0 3 3 0 616 0z'/%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z'/%3e%3c/svg%3e");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.6;
  transition: all 0.3s ease;
  z-index: 2;
}

.payment-method-card.clickeable-card:hover::before {
  opacity: 1;
  transform: scale(1.1);
}

/* Badge para payment cards */
.payment-method-card.clickeable-card::after {
  content: 'üëÅÔ∏è';
  position: absolute;
  bottom: 8px;
  right: 8px;
  background: rgba(58, 87, 167, 0.1);
  color: #3A57A7;
  font-size: 10px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  opacity: 0.8;
  transition: all 0.3s ease;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: center;
}

.payment-method-card.clickeable-card:hover::after {
  background: rgba(58, 87, 167, 0.2);
  opacity: 1;
  transform: scale(1.1);
}
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
}
.clickeable, .clickeable-card {
  position: relative;

  .click-hint {
    position: absolute;
    bottom: 12px;
    right: 12px;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    font-size: 13px;
    font-weight: 500;
    border-radius: 20px;
    color: #3A57A7;
    background: rgba(58, 87, 167, 0.1);
    backdrop-filter: blur(6px);
    z-index: 10;
    pointer-events: none;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.06);

    .hint-icon {
      font-size: 18px;
    }
  }

  &.kpi-card--primary .click-hint,
  &.kpi-card--warning .click-hint,
  &.kpi-card--success .click-hint {
    color: white;
    background: rgba(255, 255, 255, 0.2);
  }
}
